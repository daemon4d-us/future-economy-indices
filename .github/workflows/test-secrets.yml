name: Test Secrets

on:
  workflow_dispatch:

jobs:
  test-secrets:
    runs-on: ubuntu-latest
    steps:
    - name: Check if secrets exist
      run: |
        echo "Checking secrets availability..."

        if [ -z "${{ secrets.WIF_PROVIDER_DEV }}" ]; then
          echo "❌ WIF_PROVIDER_DEV is NOT set or is empty"
        else
          echo "✅ WIF_PROVIDER_DEV is set (length: ${#WIF_PROVIDER_DEV})"
        fi

        if [ -z "${{ secrets.WIF_SERVICE_ACCOUNT_DEV }}" ]; then
          echo "❌ WIF_SERVICE_ACCOUNT_DEV is NOT set or is empty"
        else
          echo "✅ WIF_SERVICE_ACCOUNT_DEV is set"
        fi

        if [ -z "${{ secrets.WIF_PROVIDER_DEV }}" ] || [ -z "${{ secrets.WIF_SERVICE_ACCOUNT_DEV }}" ]; then
          echo ""
          echo "❌ FAILED: One or more secrets are missing"
          echo ""
          echo "Please add the following secrets to:"
          echo "https://github.com/daemon4d-us/future-economy-indices/settings/secrets/actions"
          echo ""
          echo "Required secrets:"
          echo "  - WIF_PROVIDER_DEV"
          echo "  - WIF_SERVICE_ACCOUNT_DEV"
          exit 1
        else
          echo ""
          echo "✅ SUCCESS: All required secrets are set!"
        fi
      env:
        WIF_PROVIDER_DEV: ${{ secrets.WIF_PROVIDER_DEV }}
        WIF_SERVICE_ACCOUNT_DEV: ${{ secrets.WIF_SERVICE_ACCOUNT_DEV }}
