# Development environment overrides

environment: dev

# Namespace already exists, don't try to create it
namespace:
  create: false

# Single replica for dev
replicaCount: 1

# Override service account to use dev GCP project
serviceAccount:
  create: true
  name: api-server
  annotations:
    iam.gke.io/gcp-service-account: dev-api-server@urania-economy-indices-dev.iam.gserviceaccount.com

image:
  repository: gcr.io/urania-economy-indices-dev/api-server
  tag: "develop"

# Dev domain
ingress:
  host: api.dev.urania.fund
  staticIpName: future-economy-api-ip-dev

# Lower resources for cost savings
resources:
  limits:
    cpu: 250m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

# HPA with lower thresholds for dev
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 85

# More verbose logging in dev
env:
  - name: RUST_LOG
    value: "debug"
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: api-server-secrets
        key: DATABASE_URL
  - name: POLYGON_API_KEY
    valueFrom:
      secretKeyRef:
        name: api-server-secrets
        key: POLYGON_API_KEY
  - name: ANTHROPIC_API_KEY
    valueFrom:
      secretKeyRef:
        name: api-server-secrets
        key: ANTHROPIC_API_KEY
